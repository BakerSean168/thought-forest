---
tags:
  - tech/dev/frontend/browser
  - type/concept
  - status/evergreen
description: 浏览器输入URL后的完整流程(DNS/TCP/HTTP/渲染)
created: 2025-01-01T00:00:00
updated: 2025-12-07T21:16:36
---

> [!info] **上级索引**
> [[浏览器]] | [[计算机网络]]

---


# 浏览器输入网址后发生的事

当在浏览器中输入网址（URL）并按下回车后，浏览器会执行一系列复杂的步骤来加载网页。这个过程涉及多种技术和协议，以下是详细说明：

## 1. URL解析与输入处理
- **作用**：浏览器解析用户输入的URL，判断其合法性并补全默认协议
- **技术**：浏览器内置的URL解析器

## 2. DNS域名解析
- **作用**：将域名转换为对应的IP地址
- **过程**：
  1. 浏览器缓存 → 2. 系统缓存 → 3. 路由器缓存 → 4. ISP DNS服务器 → 5. 根域名服务器迭代查询
- **协议**：DNS使用UDP协议（端口53）
- **优化技术**：DNS缓存、DNSSEC（防篡改）

## 3. 建立TCP连接（三次握手）
- **作用**：确保可靠的数据传输
- **过程**：
  1. 客户端发送`SYN` → 2. 服务器回复`SYN-ACK` → 3. 客户端发送`ACK`
- **协议**：TCP协议

## 4. TLS握手（HTTPS场景）
- **作用**：加密通信
- **过程**：
  1. 客户端发送加密算法列表 → 2. 服务器返回证书 → 3. 验证证书并生成密钥
- **协议**：TLS（基于SSL）

## 5. 发送HTTP请求

- **请求结构**：
  - 请求行（方法、URL、协议版本）
  - 请求头（Host、User-Agent等）
  - 请求体（POST数据）
- **协议**：HTTP/1.1（端口80）或HTTPS（端口443）

获得cookie：若服务器需要建立会话（如用户登录），会在首次访问时在 HTTP 响应头中添加Set-Cookie字段，浏览器接收后保存到本地（内存或硬盘）  

## 6. 服务器处理请求
- **过程**：
  - 后端处理（数据库查询等）
  - 返回HTTP响应（状态码、响应头、响应体）
- **技术**：负载均衡（Nginx）、动态内容生成

## 7. 浏览器接收响应并渲染
- **渲染过程**：
  1. 构建DOM树 → 2. 构建CSSOM树 → 3. 生成渲染树 → 4. 布局 → 5. 绘制
- **优化**：
  - 预加载扫描器
  - 缓存机制（强缓存/协商缓存）

## 8. 关闭TCP连接（四次挥手）
- **过程**：
  1. 客户端发送`FIN` → 2. 服务器回复`ACK` → 3. 服务器发送`FIN` → 4. 客户端回复`ACK`

## 关键技术与协议总结

| 步骤               | 技术/协议                | 作用                          |
|--------------------|-------------------------|-------------------------------|
| DNS解析           | DNS (UDP)              | 域名→IP地址转换               |
| TCP连接           | TCP三次握手            | 可靠传输通道建立              |
| 加密通信          | TLS/SSL               | 数据加密与身份验证            |
| 数据传输          | HTTP/HTTPS             | 请求与响应规范                |
| 浏览器渲染        | WebKit/Blink          | 解析HTML/CSS/JS并显示页面      |
| 缓存优化          | DNS缓存、HTTP缓存      | 减少重复请求，提升加载速度    |

## 性能与安全优化
- **DNS预取**：提前解析页面中的链接域名
- **HTTP/2**：多路复用减少连接数
- **CDN**：分布式服务器加速资源加载
- **DNSSEC**：防止DNS劫持
