---
tags:
  - tech/lang/web
  - type/concept
  - status/growing
description: 浏览器客户端存储(Cookie/LocalStorage/IndexedDB)
created: 2025-01-01T00:00:00
updated: 2025-12-07T21:16:36
---

> [!info] **上级索引**
> [[浏览器]] | [[前端基础 MOC]]

---


# 浏览器客户端存储 

## 基础概念


- Cookie  
  约 4KB（每个域名）  
  可设置过期时间，默认会话结束时失效。
- Web Storage
  localStorage  
   5-10MB  
   永久存储，需要手动清除  
  sessionStorage  
   页面会话结束时清除
- IndexedDB  
   支持异步操作  
   适用于离线应用
- Cache API  
   与 Service Worker 配合，缓存网络请求资源，支持 PWA 离线访问  
   存储请求-响应对，常用于静态资源（HTML/CSS/JS）的离线缓存
- 内存缓存  
   全局变量或状态管理工具（如 Vuex、Redux）  
   数据仅在页面刷新前有效，响应速度快，适合高频访问的临时状态（如用户登录信息）。

### cookie

用于在客户端存储会话信息

求服务器在响应 HTTP 请求时，通过发送 Set-Cookie HTTP 头部包含会话信息。  
浏览器会存储这些会话信息，并在之后的每个请求中都会通过 HTTP 头部 cookie 再将它们发回服务器。

#### 限制

cookie 是与特定域绑定的。设置 cookie 后，它会与请求一起发送到创建它的域。  
这个限制能保证 cookie 中存储的信息只对被认可的接收者开放，不被其他域访问。

#### cookie 的构成

cookie 在浏览器中是由以下参数构成的。

```
 名称：唯一标识cookie的名称。cookie名不区分大小写，因此myCookie 和MyCookie 是同一
个名称。不过，实践中最好将 cookie 名当成区分大小写来对待，因为一些服务器软件可能这样
对待它们。cookie名必须经过URL编码。
 值：存储在cookie里的字符串值。这个值必须经过URL编码。
 域：cookie有效的域。发送到这个域的所有请求都会包含对应的cookie。这个值可能包含子域（如
www.wrox.com），也可以不包含（如.wrox.com表示对 wrox.com的所有子域都有效）。如果不明
确设置，则默认为设置cookie的域。
 路径：请求URL中包含这个路径才会把 cookie发送到服务器。例如，可以指定 cookie只能由
http://www.wrox.com/books/访问，因此访问 http://www.wrox.com/下的页面就不会发送 cookie，即
使请求的是同一个域。
 过期时间：表示何时删除cookie的时间戳（即什么时间之后就不发送到服务器了）。默认情况下，
浏览器会话结束后会删除所有cookie。不过，也可以设置删除cookie的时间。这个值是GMT格
式（Wdy, DD-Mon-YYYY HH:MM:SS GMT），用于指定删除cookie的具体时间。这样即使关闭
浏览器cookie也会保留在用户机器上。把过期时间设置为过去的时间会立即删除cookie。
 安全标志：设置之后，只在使用SSL安全连接的情况下才会把cookie发送到服务器。例如，请
求https://www.wrox.com会发送 cookie，而请求 http://www.wrox.com则不会。

HTTP/1.1 200 OK
Content-type: text/html
Set-Cookie: name=value; expires=Mon, 22-Jan-07 07:10:24 GMT; domain=.wrox.com
Other-header: other-header-value
这个头部设置一个名为"name"的 cookie，这个 cookie 在 2007 年 1 月 22 日 7:10:24 过期，对
www.wrox.com及其他wrox.com的子域（如p2p.wrox.com）有效。
安全标志secure是cookie中唯一的非名/值对，只需一个secure就可以了。比如：
HTTP/1.1 200 OK
Content-type: text/html
Set-Cookie: name=value; domain=.wrox.com; path=/; secure
Other-header: other-header-value
```

#### 子 cookie

是使用 cookie 的值在单个 cookie 中存储多个名/值对

#### 使用 cookie 的注意事项

有一种叫作 HTTP-only 的 cookie。  
HTTP-only 可以在浏览器设置，也可以在服务器设置，但只能在服务器上读取，这是因为 JavaScript 无法取得这种 cookie 的值。  
因为所有 cookie 都会作为请求头部由浏览器发送给服务器，所以在 cookie 中保存大量信息可能会影响特定域浏览器请求的性能。  
保存的 cookie 越大，请求完成的时间就越长。  
即使浏览器对 cookie 大小有限制，最好还是尽可能只通过 cookie 保存必要信息，以避免性能问题。

### Web Storage

#### Storage 类型

Storage 类型用于保存名/值对数据，直至存储空间上限（由浏览器决定）

#### sessionStorage 对象

sessionStorage 对象只存储会话数据，这意味着数据只会存储到浏览器关闭。  
这跟浏览器关闭时会消失的会话 cookie 类似。存储在 sessionStorage 中的数据不受页面刷新影响，可以在浏览器崩溃并重启后恢复。

#### localStorage

作为在客户端持久存储数据的机制。  
要访问同一个 localStorage 对象，页面必须来自同一个域（子域不可以）、在相同的端口上使用相同的协议。

存储在 localStorage 中的数据会保留到通过 JavaScript 删除或者用户清除浏览器缓存。  
localStorage 数据不受页面刷新影响，也不会因关闭窗口、标签页或重新启动浏览器而丢失。

#### 存储事件

每当 Storage 对象发生变化时，都会在文档上触发 storage 事件。


## 使用指南

## 实战经验

## 经验总结

## 信息参考

