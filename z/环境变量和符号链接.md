---
tags: [status/growing, type/concept]
description: base_template
created: 2025-12-24T11:51:56
updated: 2025-12-24T11:53:42
---

[[类 Linux 的文件架构（FHS, Filesystem Hierarchy Standard）]]

要让这套类 Linux 的文件结构真正“活”起来，不再只是几个死板的文件夹，你需要利用 Windows 的底层机制：**环境变量（Environment Variables）和符号链接（Symbolic Links）**。

这套组合拳能让你的系统实现：**“路径自由”**（软件以为自己在 C 盘，其实在 D 盘）和 **“调用自由”**（在任何地方输入命令都能直接运行）。

---

## 1. 环境变量：系统的“任意门”

环境变量告诉系统：“当你找不到某个东西时，去这些地方看看”。

### A. PATH 变量：让 `D:\bin` 变成全局指令集

你把 `ffmpeg.exe` 丢进了 `D:\bin`。如果不设置 PATH，你必须进入那个文件夹才能运行它。设置后，你在任何文件夹打开终端输入 `ffmpeg`，它都能运行。

- **操作建议：** 将 `D:\bin` 和 `D:\scoop\shims` 全部加入 **用户 PATH**。
- **黑科技：** 你甚至可以写一个 `D:\bin\hello.bat`，内容是 `echo Hello World`。从此，你在终端输入 `hello` 就能打招呼。

### B. 自定义变量：缩短路径深度

如果你经常要通过命令行进入某个很深的目录，比如 `D:\home\projects\work\2025\web-app`，你可以设置一个环境变量 `PROJECTS = D:\home\projects`。

- 在 PowerShell 中，你可以直接 `cd $env:PROJECTS`。

---

## 2. 符号链接：文件的“分身术”

这是最精彩的部分。Windows 提供了 `mklink` 命令，其中最常用的是 **Directory Junction (目录联接)**。

### 为什么需要它？

很多软件（如微信、Adobe、甚至某些开发工具）死活都要把缓存或数据放在 `C:\Users\用户名\AppData` 里，导致 C 盘迅速爆满。通过软链接，我们可以**“欺骗”**软件。

### 实战场景 1：重定向“文档”或“桌面”

虽然 Windows 可以在属性里更改位置，但手动用软链接更彻底：

PowerShell

```
# 将 C 盘的文档文件夹 链接到 D 盘的 home\docs
# 1. 先把原文件夹内容搬走并删除原文件夹
# 2. 运行以下指令 (需要管理员权限)
mklink /J "C:\Users\YourName\Documents" "D:\home\docs"
```

**结果：** 软件往 `Documents` 写东西，物理上直接存进了 `D:\home\docs`。

### 实战场景 2：拯救 C 盘的 AppData (重度整洁控必看)

某些软件的插件（如 VS Code 的扩展、Maven 的仓库）非常占空间。

- **原路径：** `C:\Users\Name\.m2` (Maven 仓库)
- **新路径：** `D:\var\m2`
- **操作：** `mklink /J "C:\Users\Name\.m2" "D:\var\m2"`

---

## 3. 自动化配置脚本 (进阶版)

这是我为你准备的脚本，建议重装系统并建立好文件夹结构后运行。它会自动建立“活”的链接：

PowerShell

```
# 请以管理员权限运行！

# 定义你的 D 盘家目录
$myHome = "D:\home"
$myOpt = "D:\opt"
$userProfile = "C:\Users\$env:USERNAME"

# 1. 建立核心目录联接 (Junction)
# 注意：运行前请确保 C 盘对应的原文件夹已被删除或重命名
function Create-Link {
    param($link, $target)
    if (Test-Path $target) {
        cmd /c mklink /J "$link" "$target"
        Write-Host "Linked $link ---> $target" -ForegroundColor Cyan
    }
}

# 举例：把 C 盘的 .ssh 目录物理定位到 D 盘的 etc 下
# 这样你重装系统后，只要 D 盘在，你的 SSH 密钥自动就位
Create-Link "$userProfile\.ssh" "D:\etc\ssh"

# 2. 针对某些顽固软件的缓存重定向 (比如 Telegram 或微信)
# Create-Link "$env:APPDATA\Telegram Desktop" "D:\var\cache\Telegram"

# 3. 设置常用软件的自定义根目录环境变量
[Environment]::SetEnvironmentVariable("OPTPATH", "D:\opt", "User")
```

---

## 4. 总结：这套方案的“无敌”之处

当你重装系统时，这套架构的威力就会爆发：

1. **秒速恢复：** 你只需要重装一个纯净的 Windows。
2. **挂载 D 盘：** 运行一下这个脚本，C 盘和 D 盘的“通道”瞬间打通。
3. **软件免装：** 你在 `D:\scoop` 里的软件和 `D:\bin` 里的脚本，只要 PATH 一指，全部立刻可用，无需点击安装程序。
4. **数据隔离：** 你的 C 盘从此只负责“运算”，所有的“记忆”（数据、配置）都稳稳地留在 D 盘。

### 注意事项：

- **权限问题：** 执行 `mklink` 必须使用**管理员权限**的终端。
- **路径空格：** 文件夹命名尽量不要带空格（用下划线或中划线），这样在命令行里调用会省去很多麻烦。
- **删除逻辑：** 删除链接（Link）不会删除原文件（Target），但删除原文件，链接就会失效（变成死链）。

**你想好你的第一批 `D:\bin` 里要放哪些小工具了吗？我可以帮你推荐一些实用的单文件生产力工具。**