---
tags:
  - tech/lang/typescript
  - type/howto
  - status/growing
description: Goal 模块
created: 2025-01-01T00:00:00
updated: 2025-12-07T21:16:37
---

> [!info] **上级索引**
> [[DailyUse-MOC]]

---


# 业务理解

## 模块目标

1. okr 式的目标管理，有关键结果，结束时间（支持无期限），可行性分析等
2. 能够使用文件夹来层级管理目标，应该有系统文件夹（全部、已归档、已删除）
3. 目标应该支持能够扩展的元数据，还有基础的 tags、createAt、updateAt、重要程度和紧急程度（contracts的shared已经有了） 等
4. 应该有完整的生命周期管理（进行中、归档、已删除）
5. 提醒设置，用户应该可以设定任务还剩多少天时进行提醒

### 业务概览

1. goal 模块、task 模块、reminder 模块的提醒功能需要依赖 schedule 模块，记得统一一下时间配置，应该是使用 cron 表达式
2. 其他的


## 主进程

# 渲染进程



UI、数据转换、前端业务逻辑

应该有页面（views）和组件（components）  
目标管理页面、目标详情页、关键结果详情页、记录创建表单  
目标创建表单、目标卡片、关键结果创建表单、

goalDirs 中应该默认有 全部、已删除、已归档 三个文件夹，并且 全部 文件夹一直显示并显示在文件夹列表最上方 已删除 和 已归档 文件夹在有数据时显示并显示在最下方

## presentation

### review

#### 布局

上方 header 显示标题和按钮，并固定在顶部。  
中间 sections 显示图表和自我诊断表单。  

想到两种布局方案：  
让它（#goal-review 容器）最小占据 100 %，但当内容超出时，随内容增加大小。  
或者说（#goal-review 容器 就占据 100%），让内容区域被可滚动标签包裹，在固定大小内滚动，始终有背景

**问题：**  
1. 这个 goal-review 为什么只占据了 100% 页面高度，内容已经超过了它，导致下滑后的区域没有背景了  
因为 `height: 100%`  是继承父元素的高度，如果父元素（比如 `<body>` 或 `<html>` 或上级 div）没有设置明确的高度（height: 100% 或 height: xxx px/vh），那么它的高度是由内容撑开的（auto），但不会超出父元素的高度。  
此时这个配置无效。



#### 图表区

1. 使用 echarts 库绘制图表来展示用户的目标完成信息

我是不是可以使用 echarts 的图表来更多得展示 目标完成情况信息给用户，让用户更好地复盘

将时间分为：  
- 6:00 - 12:00 早晨
- 12:00 - 18:00 下午
- 18:00 - 24:00 晚上
- 24:00 - 6:00 凌晨

根据目标中的 record 数据中的时间来判断目标完成的时间段，并将其分类，统计出来，并绘制图表，帮助用户了解自己的高效率时间段

2. 表现用户目标完成进度和时间进度的图表

首先是目标完成进度的图表，背景颜色则由时间进度（百分比）来填充，当时间进度超过目标完成进度的值到 danger_threshold 时，则将背景颜色设置为 danger_color（红），当时间进度超过目标完成进度的值到 warning_threshold 时，则将背景颜色设置为 warning_color（黄），当时间进度超过目标完成进度的值时，则将背景颜色设置为 safe_color（绿）。  

可以使用甘特图，或者什么图比较好呢？  
两个条形图  

3. 每个关键结果的进度体现
条形图


### 数据持久化


