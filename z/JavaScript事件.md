---
tags:
  - tech/lang/javascript
  - type/concept
  - status/growing
description: JavaScript事件
created: 2025-01-01T00:00:00
updated: 2025-12-07T21:16:37
---

> [!info] **上级索引**
> [[ECMAScript MOC]] | [[前端基础 MOC]]

---


# JavaScript事件 

## 基础概念

JavaScript 与 HTML 的交互是通过事件实现的，事件代表文档或浏览器窗口中某个有意义的时刻。  
可以使用仅在事件发生时执行的监听器（也叫处理程序）订阅事件。  
在传统软件工程领域，这个模型叫“观察者模式”，其能够做到页面行为（在 JavaScript 中定义）与页面展示（在 HTML 和 CSS 中定义）的分离。

### 事件流

事件流描述了页面接收事件的顺序。

#### 事件冒泡

IE 事件流被称为事件冒泡，这是因为事件被定义为从最具体的元素（文档树中最深的节点）开始触发，然后向上传播至没有那么具体的元素（文档）。

#### 事件捕获

事件捕获的意思是最不具体的节点应该最先收到事件，而最具体的节点应该最后收到事件。  
事件捕获实际上是为了在事件到达最终目标前拦截事件。

#### DOM 事件流

DOM2 Events 规范规定事件流分为 3 个阶段：事件捕获、到达目标和事件冒泡。  
事件捕获最先发生，为提前拦截事件提供了可能。  
然后，实际的目标元素接收到事件。最后一个阶段是冒泡，最迟要在这个阶段响应事件。

### 事件处理程序

事件意味着用户或浏览器执行的某种动作。  
比如，单击（click）、加载（load）、鼠标悬停（mouseover）。  
为响应事件而调用的函数被称为事件处理程序（或事件监听器）。  
事件处理程序的名字以"on"开头，因此 click 事件的处理程序叫作 onclick，而 load 事件的处理程序叫作 onload。

#### HTML 事件处理程序

特定元素支持的每个事件都可以使用事件处理程序的名字以 HTML 属性的形式来指定。

### 事件对象

在 DOM 中发生事件时，所有相关信息都会被收集并存储在一个名为**event**的对象中。  
这个对象包含了一些基本信息，比如导致事件的元素、发生的事件类型，以及可能与特定事件相关的任何其他数据。  
例如，鼠标操作导致的事件会生成鼠标位置信息，而键盘操作导致的事件会生成与被按下的键有关的信息。

### 事件类型

Web 浏览器中可以发生很多种事件。  
如前所述，所发生事件的类型决定了事件对象中会保存什么信息。

```
DOM3 Events定义了如下事件类型。
 用户界面事件（UIEvent）：涉及与BOM交互的通用浏览器事件。
 焦点事件（FocusEvent）：在元素获得和失去焦点时触发。
 鼠标事件（MouseEvent）：使用鼠标在页面上执行某些操作时触发。
 滚轮事件（WheelEvent）：使用鼠标滚轮（或类似设备）时触发。
 输入事件（InputEvent）：向文档中输入文本时触发。
 键盘事件（KeyboardEvent）：使用键盘在页面上执行某些操作时触发。
 合成事件（CompositionEvent）：在使用某种IME（Input Method Editor，输入法编辑器）输入
字符时触发。
```

#### 用户界面事件

1. load 事件
   在 window 对象上，load 事件会在整个页面（包括所有外部资源如图片、JavaScript 文件和 CSS 文件）加载完成后触发。
2. unload 事件
   在文档卸载完成后触发。unload 事件一般是在从一个页面导航到另一个页面时触发，最常用于清理引用，以避免内存泄漏。
3. resize 事件
4. scroll 事件

#### 焦点事件

焦点事件在页面元素获得或失去焦点时触发。  
这些事件可以与 document.hasFocus()和 document.activeElement 一起为开发者提供用户在页面中导航的信息。

当焦点从页面中的一个元素移到另一个元素上时，会依次发生如下事件。
(1) focuscout 在失去焦点的元素上触发。
(2) focusin 在获得焦点的元素上触发。
(3) blur 在失去焦点的元素上触发。
(4) DOMFocusOut 在失去焦点的元素上触发。
(5) focus 在获得焦点的元素上触发。
(6) DOMFocusIn 在获得焦点的元素上触发。
其中，blur、DOMFocusOut 和 focusout 的事件目标是失去焦点的元素，而 focus、DOMFocusIn
和 focusin 的事件目标是获得焦点的元素。

#### 鼠标和滚轮事件

 click：在用户单击鼠标主键（通常是左键）或按键盘回车键时触发。这主要是基于无障碍的考
虑，让键盘和鼠标都可以触发 onclick 事件处理程序。
 dblclick：在用户双击鼠标主键（通常是左键）时触发。这个事件不是在 DOM2 Events 中定义
的，但得到了很好的支持，DOM3 Events 将其进行了标准化。
 mousedown：在用户按下任意鼠标键时触发。这个事件不能通过键盘触发。
 mouseenter：在用户把鼠标光标从元素外部移到元素内部时触发。这个事件不冒泡，也不会在
光标经过后代元素时触发。mouseenter 事件不是在 DOM2 Events 中定义的，而是 DOM3 Events
中新增的事件。
 mouseleave：在用户把鼠标光标从元素内部移到元素外部时触发。这个事件不冒泡，也不会在
光标经过后代元素时触发。mouseleave 事件不是在 DOM2 Events 中定义的，而是 DOM3 Events
中新增的事件。
 mousemove：在鼠标光标在元素上移动时反复触发。这个事件不能通过键盘触发。
 mouseout：在用户把鼠标光标从一个元素移到另一个元素上时触发。移到的元素可以是原始元
素的外部元素，也可以是原始元素的子元素。这个事件不能通过键盘触发。
 mouseover：在用户把鼠标光标从元素外部移到元素内部时触发。这个事件不能通过键盘触发。
 mouseup：在用户释放鼠标键时触发。这个事件不能通过键盘触发。

页面中的所有元素都支持鼠标事件。除了 mouseenter 和 mouseleave，所有鼠标事件都会冒泡，都可以被取消，而这会影响浏览器的默认行为。

比如，click 事件触发的前提是 mousedown 事件触发后，紧接着又在同一个元素上触发了 mouseup 事件。如果 mousedown 和 mouseup 中的任意一个事件被取消，那么 click 事件就不会触发。

#### 键盘与输入事件

键盘事件包含 3 个事件：
 keydown，用户按下键盘上某个键时触发，而且持续按住会重复触发。
 keypress，用户按下键盘上某个键并产生字符时触发，而且持续按住会重复触发。Esc 键也会
触发这个事件。DOM3 Events 废弃了 keypress 事件，而推荐 textInput 事件。
 keyup，用户释放键盘上某个键时触发。

当用户按下键盘上的某个字符键时，首先会触发 keydown 事件，然后触发 keypress 事件，最后触发 keyup 事件。  
注意，这里 keydown 和 keypress 事件会在文本框出现变化之前触发，而 keyup 事件会在文本框出现变化之后触发。  
如果一个字符键被按住不放，keydown 和 keypress 就会重复触发，直到这个键被释放。

对于非字符键，在键盘上按一下这个键，会先触发 keydown 事件，然后触发 keyup 事件。  
如果按住某个非字符键不放，则会重复触发 keydown 事件，直到这个键被释放，此时会触发 keyup 事件。

**textInput 事件**

- 对 keypress 的替代
- 只在可编辑区域上触发。
- 只在有新字符被插入时才会触发

#### 合成事件

合成事件是 DOM3 Events 中新增的，用于处理通常使用 IME 输入时的复杂输入序列。  
IME 可以让用户输入物理键盘上没有的字符。

#### HTML5 事件

1. contextmenu 事件
2. beforeunload 事件
   给开发者提供阻止页面被卸载的机会

### 内存与性能

在 JavaScript 中，页面中事件处理程序的数量与页面整体性能直接相关。原因有很多。首先，每个函数都是对象，都占用内存空间，对象越多，性能越差。其次，为指定事件处理程序所需访问 DOM 的次数会先期造成整个页面交互的延迟。只要在使用事件处理程序时多注意一些方法，就可以改善页面性能。

#### 事件委托

“过多事件处理程序”的解决方案是使用事件委托。  
事件委托利用事件冒泡，可以只使用一个事件处理程序来管理一种类型的事件。

#### 删除事件处理程序

### 模拟事件

以通过 JavaScript 在任何时候触发任意事件

## 使用指南

## 实战经验

## 经验总结

## 信息参考
